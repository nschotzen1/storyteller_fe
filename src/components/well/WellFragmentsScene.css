.wellScene {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 600px;
  /* Ensure enough height if container is flexible */
  overflow: hidden;
  background-color: #0d1117;
  /* Dark fallback */
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: 'Times New Roman', serif;
  user-select: none;
}

.wellBg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: 0;
  pointer-events: none;
}

/* Container for the fragment to handle positioning and rotation */
.fragment {
  position: absolute;
  z-index: 10;
  width: 200px;
  /* Base width, scalable */
  height: auto;
  cursor: grab;
  will-change: transform, opacity, filter;
  /* transition: transform 0.2s ease-out; */
  /* Interfere with animations? */
  pointer-events: auto;
}

.fragmentImg {
  width: 100%;
  height: auto;
  display: block;
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.6));

  /* MASK for Transparency */
  -webkit-mask-image: url('/well/fragments/fragment_mask.png');
  mask-image: url('/well/fragments/fragment_mask.png');

  -webkit-mask-mode: luminance;
  mask-mode: luminance;

  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;

  -webkit-mask-size: 100% 100%;
  mask-size: 100% 100%;
}

.fragmentText {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  text-align: center;
  pointer-events: none;
  /* Let clicks pass to parent */
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  line-height: 1.4;
  mix-blend-mode: multiply;
  /* Make text look like ink on paper */
}

/* ANIMATIONS */

/* 
     Phase A: Surface 
     Starts deep/small/blurry, rises to normal 
  */
.fragment.surfacing {
  animation: surfaceIn 1.2s ease-out forwards;
}

@keyframes surfaceIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.4) translateY(50px);
    filter: blur(8px);
  }

  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) translateY(0);
    filter: blur(0.5px);
    /* Slight underwater blur remains */
  }
}

/* 
     Phase B: Floating 
     Gentle bobbing
  */
.fragment.floating {
  animation: floatBob 6s ease-in-out infinite;
}

@keyframes floatBob {

  0%,
  100% {
    transform: translate(-50%, -50%) translateY(0);
  }

  50% {
    transform: translate(-50%, -50%) translateY(-10px);
  }
}

/* 
     Phase C: Sinking
     Fades out, drifts down, blurs more
  */
.fragment.sinking {
  animation: sinkOut 2s ease-in forwards;
  pointer-events: none;
  /* Hard to catch once sinking starts, but logic allows it if clicked fast */
}

@keyframes sinkOut {
  0% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
    filter: blur(0.5px);
  }

  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.6) translateY(60px);
    filter: blur(10px);
  }
}

/* 
     Phase D: Captured
     Flash bright, then lift up out of water
  */
.fragment.captured {
  animation: captureUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  cursor: default;
}

@keyframes captureUp {
  0% {
    filter: brightness(1.5) blur(0);
    transform: translate(-50%, -50%) scale(1);
  }

  30% {
    filter: brightness(2);
    transform: translate(-50%, -50%) scale(1.1);
    /* Pop effect */
  }

  100% {
    opacity: 0;
    filter: brightness(1);
    transform: translate(-50%, -50%) scale(1.2) translateY(-100px);
    /* Lift out */
  }
}